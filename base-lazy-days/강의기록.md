# React Query

## install

```npm i @tanstack/react-query
@tanstack/react-query-devtools

npm i -D @tanstack/eslint-plugin-query
```

devtools을 dev dependency로 하지 않는 이유 : 앱 컴포넌트들에서 dev tools를 가져와 추가한 다음 dev tools를 사용하여 node 환경을 테스트하고 node 환경이 development인 경우 이를 포함하지 않기 때문

---

## 중앙 집중식 Fetching Hook

각 컴포넌트에 대해 개별 로딩 인디케이터를 사용하는 대신
중앙 집중식 로딩 인디케이터를 사용하는게 좋다.

### useIsFetching

- `useIsFetching`은 현재 가져오기 상태인 쿼리 호출의 수를 나타내는 정수를 반환.
- isFetching이 0보다 크면 페칭 상태의 호출이 있으며 True로 평가된다는 의미.

예시 `client / src/ App / <Loading/>` 컴포넌트에 작성함

## queryClient 에 대한 OnError 기본 값

Q. 왜 useError은 없는가?
-> 각 오류에 대한 메세지를 표시해야하기 때문에 useIsFetching처럼 기본 훅을 제공하지 않는 것으로 보임.

```tsx
const queryClient = new QueryClient({
  queryCache: new QueryCache({
    onError: (error) => {
      //handle Error
    },
  }),
});
```

`base-lazy-days/client/src/react-query/queryClient.ts` 에 로직 작성
